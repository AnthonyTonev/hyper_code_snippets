{
        "title": "python_env",
        "description": "node.js python spawn process",
        "files":["main.py","index.js","main.js","index.html","output.txt"],
        "code":"{\"0\":\"def my_function(x):\\n  arr = [1,2,3,x*10]\\n  return arr[::-1]\\n\\nprint(my_function(5))\",\"1\":\"const PORT = 8095;\\nimport * as http from \\\"http\\\";\\nimport * as url from \\\"url\\\";\\nimport * as fs from \\\"fs\\\";\\nimport { fileURLToPath } from \\\"url\\\";\\nimport { dirname } from \\\"path\\\";\\nimport {spawn} from \\\"child_process\\\";\\nconst server = http.createServer();\\nserver.listen(PORT, () => {\\n  console.log(\\\"python instance - listening on port \\\" + PORT);\\n});\\n\\nserver.on('request', (req, res) => {\\nlet dataToSend;\\nconst python = spawn('python', ['main.py']);\\n python.stdout.on('data', (data) =>{\\n  console.log('Pipe data from python script ...');\\n  dataToSend = data.toString();\\n });\\n      \\n python.on('close', (code) => {\\n console.log(`child process close all stdio with code ${code}`);\\n    res.writeHead(200, { \\\"Content-Type\\\": \\\"text/plain\\\" });\\n        fs.writeFile('output.txt',dataToSend,(err) => {\\n            if (err) {\\n              console.log(err);\\n              res.end();\\n            }\\n            res.end();\\n          }\\n        );\\n });\\n   \\n \\n});\\n\",\"2\":\"const env = '1930568083';\\nconst outputElement = document.getElementById(\\\"result\\\");\\nconst getPythonResult = ()=>{\\n   fetch('http://localhost:8095/', {\\n  method: 'GET',\\n  mode: 'no-cors',\\n}).then(()=> fetch(`http://localhost:8084/data/storage/${env}/output.txt`)\\n  \\t\\t\\t.then(res=>res.text())\\n       \\t\\t\\t     .then(res=>outputElement.textContent = res))\\n  \\n}\\ndocument.addEventListener(\\\"DOMContentLoaded\\\", getPythonResult);\",\"3\":\"<!DOCTYPE html>\\n<html lang=\\\"en\\\">\\n<head>\\n  <style>body{\\n    font-family:Consolas; color:white;\\n    background:black;\\n    }\\n  </style>\\n  <meta charset=\\\"UTF-8\\\">\\n  <meta name=\\\"viewport\\\" content=\\\"width=device-width, initial-scale=1.0\\\">\\n  <title>Document</title>\\n</head>\\n<body>\\n  <p id=\\\"result\\\"></p>\\n<script type=\\\"text/javascript\\\" src=\\\"main.js\\\"></script>\\n</body>\\n\\n</html>\",\"4\":\"[50, 3, 2, 1]\\r\\n\"}"
}
